<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>ECMAScript-신규변수사용법(const/let)</h1>
    <script>
      // var는 전통적인(old) 변수 선언 예약어
      var userNmae = "강지웅";
      var age = 22;

      // 기본 상품 가격
      var price = 5000;
      var isFemale = true;

      // 기본 배송비 설정
      // 비지니스 규칙: 기본 배송비는 한 번 값이 할당되면 변경이 되어선 안 됩니다. (상수)
      var baseDelyFee = 3000;
      console.log("기본 배송비: var:", baseDelyFee);

      baseDelyFee = 5000;
      // console 은 웹 브라우저 개발자도구 내 콘솔탭에 로그를 찍는 기능입니다.

      console.log("기본 배송비: var:", baseDelyFee);
      // var로 선언된 변수는 상수개념이 없어서 언제든지 값을 변경할 수 있습니다.
      // 그래서 2015년도(ES6=ES2015) 신규 자바 스크립트 문법에 상수 개념 도입(const 상수 도입)

      // const 상수를 이용해 값을 할당해봅시다.
      const newBaseDelyFee = 3000;

      // const 정의된 상수는 한 번 값이 할당되면 변경이 불가하면 변경 시 에러를 발생시킨다.
      // newBaseDelyFee = 5000;

      // 총 결제 금액
      let totalPayPrice = 0;

      console.log("최초 총 결제 비용:", totalPayPrice);

      // 총 결제 비용에 기본 배송비 추가
      totalPayPrice += newBaseDelyFee;

      // 총 결제 비용에 기본 상품 가격 추가
      totalPayPrice = totalPayPrice + price;

      console.log("현재 총 결제 비용:", totalPayPrice);

      // var와 let/const와의 큰 차이는 블록스코프를 준수합니다.
      // 블록스코프는 if/for 구문 블럭 내에서 변수/상수가 선언되면 그 안에서만 사용되어야 하는데
      // var는 밖에서도 사용이 가능한 문제점을 개선하는 방법

      const region = "제주도";

      // if 구문 { 여기가 블록스코프-가정문 범위}
      // 프로그래밍 시 if/for 등 특정 영역 내에서 선언된 변수는 그 범위 내에서만 사용이 되어야 정상이지만
      // var는 해당 범위 밖에서도 호출 및 사용이 가능하다. (에러 발생 원인 제공)
      if (region == "제주도") {
        // 원래가 if/for {블럭 내에서 선언된 변수는 그 안에서만 사용하기 위해 선언한 것임}
        // 선언된 블록 외부에서 사요하면 에러를 발생시킬 여지가 커짐(안 좋아)
        var alertMsg = "도서지역";
      }

      // var는 블록 스코프 밖에서도 사용이 가능하다. : 이런이런 이게 문제야...
      // 이 점을 개선하기 위해 const/let 은 블록 스코프 밖에서 사용하면 자동으로 에러를 발생시켜준다.
      console.log("alertMsg=", alertMsg);

      if (region == "제주도") {
        // 도서지역 추가 배송비 상수 정의값 할당
        const addDelyFee = 2000;
        let alertMsg2 = "도서지역";

        console.log(
          "상수/변수가 선언된 블록스코프 내에서의 사용은 OK",
          addDelyFee,
          alertMsg2
        );
      }

      // console.log("블록스코프 밖에서 const 사용: 에러 발생", addDelyFee);
      // console.log("블록스코프 밖에서 let 사용: 에러 발생", addDelyFee);
    </script>
  </body>
</html>
